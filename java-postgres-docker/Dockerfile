# Usar una imagen base de Java
FROM openjdk:17-jdk-alpine AS build

# Establecer el directorio de trabajo
WORKDIR /app

# Copiar el pom.xml y mvnw
COPY pom.xml ./
COPY mvnw ./
COPY .mvn ./.mvn

# Hacer mvnw ejecutable
RUN chmod +x mvnw

# Copiar el c贸digo fuente
COPY src ./src

# Ejecutar la construcci贸n de Maven
RUN ./mvnw clean package -DskipTests

# Usar una imagen base de Java para el runtime
FROM openjdk:17-jdk-alpine

# Establecer el directorio de trabajo
WORKDIR /app

# Copiar el JAR construido desde la etapa de construcci贸n
COPY --from=build /app/target/*.jar app.jar

# Comando para ejecutar la aplicaci贸n
ENTRYPOINT ["java","-jar","app.jar"]